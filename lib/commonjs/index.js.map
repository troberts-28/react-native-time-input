{"version":3,"sources":["index.tsx"],"names":["TimeInput","id","errorText","showErrorText","isDuration","initialValue","onTimeChange","onFinishEditing","setCurrentTime","hideToggle","includeSeconds","hideHours","isDisabled","maxHours","maxMinutes","maxSeconds","placeholderTime","alwaysShowFloatingMessageOnFocus","floatingErrorMessage","floatingErrorOffset","styles","defaultStyles","theme","defaultTheme","initialRender","animation","Animated","Value","current","componentReady","setComponentReady","componentTheme","setComponentTheme","componentStyle","setComponentStyle","componentErrorText","setComponentErrorText","currentLocaleTime","currentLocaleTimeParsed","initialTimeParsed","Date","console","log","getGivenTime","meridiem","setMeridiem","gt","time","setTime","validTime","setValidTime","handleTimeValueReady","isValid","updated","handleMeridiemChange","timing","toValue","delay","duration","useNativeDriver","start","StyleSheet","create","_","merge","assign","stopAnimation","length","componentContainer","container","placeholderTextColor","focusBorderColor","inputBorderColor","inputBackgroundColor","inputInvalidBorderColor","selectionColor","input","backgroundColor","borderColor","borderWidth","inputBorderWidth","color","inputTextColor","fontFamily","inputFontFamily","fontSize","inputFontSize","toggle","toggleBackgroundColor","toggleButton","toggleButtonBackground","toggleButtonTextColor","toggleButtonActive","toggleButtonActiveBackgroundColor","transform","translateX","toggleButtonActiveTextColor","errorTextContainer","errorTextColor","paddingLeft","errorTextPaddingLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { Animated, StyleSheet, Text, View } from 'react-native';\nimport TimeTextField from './components/TimeTextField';\nimport _ from 'lodash';\nimport Toggle, { ToggleButton } from './components/Toggle';\nimport defaultStyles from './utils/style';\nimport defaultTheme from './utils/theme';\nimport getLocaleTimeString from './helpers/getLocaleTimeString';\nimport parseLocaleTimeString from './helpers/parseLocaleTimeString';\nimport durationInputConverter from './helpers/durationInputConverter';\nimport type TimeInputProps from './typing/TimeInputProps';\nimport type TimeInputStyle from './typing/TimeInputStyle';\nimport type TimeInputTheme from './typing/TimeInputTheme';\nimport type { TimeParts } from './typing/TimeParts';\n\nexport default function TimeInput({\n  id,\n  errorText = null,\n  showErrorText = true,\n  isDuration = false,\n  initialValue = null,\n  onTimeChange = () => {},\n  onFinishEditing,\n  setCurrentTime = false,\n  hideToggle = false,\n  includeSeconds = false,\n  hideHours = false,\n  isDisabled = false,\n  maxHours,\n  maxMinutes,\n  maxSeconds,\n  placeholderTime,\n  alwaysShowFloatingMessageOnFocus,\n  floatingErrorMessage,\n  floatingErrorOffset,\n  styles = defaultStyles,\n  theme = defaultTheme,\n}: TimeInputProps): JSX.Element | null {\n  const initialRender = useRef(true);\n  const animation = useRef(new Animated.Value(0)).current;\n  const [componentReady, setComponentReady] = useState<boolean>(false);\n  const [componentTheme, setComponentTheme] = useState<TimeInputTheme | null>(\n    null\n  );\n  const [componentStyle, setComponentStyle] = useState<TimeInputStyle | null>(\n    null\n  );\n  const [componentErrorText, setComponentErrorText] = useState<string>(\n    'Please enter a valid time.'\n  );\n  const [currentLocaleTime] = useState<string>(\n    getLocaleTimeString(null, hideHours, includeSeconds, hideToggle)\n  );\n  const [currentLocaleTimeParsed] = useState<TimeParts>(\n    parseLocaleTimeString(currentLocaleTime)\n  );\n  const [initialTimeParsed] = useState<TimeParts | null>((): TimeParts | null =>\n    isDuration && typeof initialValue === 'number'\n      ? parseLocaleTimeString(\n          durationInputConverter(initialValue, hideHours, includeSeconds)\n        )\n      : initialValue instanceof Date\n      ? parseLocaleTimeString(\n          getLocaleTimeString(\n            initialValue,\n            hideHours,\n            includeSeconds,\n            hideToggle\n          )\n        )\n      : null\n  );\n\n  console.log(initialTimeParsed, typeof initialValue);\n\n  const getGivenTime = (): TimeParts | null => {\n    if (initialValue && initialTimeParsed) return initialTimeParsed;\n    return setCurrentTime ? currentLocaleTimeParsed : null;\n  };\n\n  const [meridiem, setMeridiem] = useState<string>(() => {\n    let gt = getGivenTime();\n    return !gt ? currentLocaleTimeParsed.meridiem : gt.meridiem;\n  });\n  const [time, setTime] = useState<string>('');\n  const [validTime, setValidTime] = useState<boolean>(true);\n\n  const handleTimeValueReady = (isValid: boolean, updated: string): void => {\n    setTime(updated);\n    setValidTime(isValid);\n  };\n\n  const handleMeridiemChange = useCallback(() => {\n    Animated.timing(animation, {\n      toValue: meridiem === 'PM' ? 40 : 0,\n      delay: 0,\n      duration: 225,\n      useNativeDriver: true,\n    }).start();\n  }, [animation, meridiem]);\n\n  // Init component after setting the theme and styles\n  useEffect((): void => {\n    if (!componentStyle || !componentTheme) return;\n    setComponentReady(true);\n  }, [componentStyle, componentTheme, setComponentReady]);\n\n  useEffect((): void => {\n    setComponentStyle(StyleSheet.create(_.merge({}, defaultStyles, styles)));\n    setComponentTheme(_.assign({}, defaultTheme, theme));\n  }, [styles, theme, setComponentStyle, setComponentTheme]);\n\n  useEffect(() => {\n    if (!errorText) return;\n    setComponentErrorText(errorText);\n  }, [errorText, setComponentErrorText]);\n\n  useEffect(() => {\n    handleMeridiemChange();\n    return () => animation.stopAnimation();\n  }, [meridiem, animation, handleMeridiemChange]);\n\n  useEffect(() => {\n    if (initialRender.current) {\n      initialRender.current = false;\n      return;\n    }\n\n    time.length\n      ? onTimeChange(id, `${time} ${meridiem}`, validTime)\n      : onTimeChange(id, '', validTime);\n  }, [time, meridiem, validTime, onTimeChange, id]);\n\n  if (!componentReady || !componentStyle || !componentTheme) return null;\n\n  return (\n    <View style={componentStyle.componentContainer}>\n      <View style={componentStyle.container}>\n        <TimeTextField\n          id={id}\n          givenTime={getGivenTime()}\n          onFinishEditing={onFinishEditing}\n          maxHours={maxHours}\n          maxMinutes={maxMinutes}\n          maxSeconds={maxSeconds}\n          isDisabled={isDisabled}\n          includeSeconds={includeSeconds}\n          hideHours={hideHours}\n          placeholderTime={placeholderTime}\n          placeholderColor={\n            !isDisabled ? componentTheme.placeholderTextColor : 'transparent'\n          }\n          focusBorderColor={componentTheme.focusBorderColor}\n          alwaysShowFloatingMessageOnFocus={alwaysShowFloatingMessageOnFocus}\n          floatingErrorMessage={floatingErrorMessage}\n          floatingErrorOffset={floatingErrorOffset}\n          unfocusBorderColor={componentTheme.inputBorderColor}\n          bg={componentTheme.inputBackgroundColor}\n          invalidBorderColor={componentTheme.inputInvalidBorderColor}\n          selectionColor={componentTheme.selectionColor}\n          style={[\n            componentStyle.input ?? {},\n            {\n              backgroundColor: componentTheme.inputBackgroundColor,\n              borderColor: componentTheme.inputBorderColor,\n              borderWidth: componentTheme.inputBorderWidth,\n              color: componentTheme.inputTextColor,\n              fontFamily: componentTheme.inputFontFamily,\n              fontSize: componentTheme.inputFontSize,\n            },\n          ]}\n          onTimeValueReady={handleTimeValueReady}\n        />\n\n        {!hideToggle && !isDuration && (\n          <Toggle\n            toggleStyles={[\n              componentStyle.toggle ?? {},\n              {\n                backgroundColor: componentTheme.toggleBackgroundColor,\n              },\n            ]}\n          >\n            <ToggleButton\n              toggleButtonStyles={[\n                componentStyle.toggleButton ?? {},\n                {\n                  backgroundColor: componentTheme.toggleButtonBackground,\n                },\n              ]}\n              onPress={() => setMeridiem('AM')}\n            >\n              <Text\n                style={{\n                  color: componentTheme.toggleButtonTextColor,\n                }}\n              >\n                AM\n              </Text>\n            </ToggleButton>\n\n            <ToggleButton\n              toggleButtonStyles={[\n                componentStyle.toggleButton ?? {},\n                {\n                  backgroundColor: componentTheme.toggleButtonBackground,\n                },\n              ]}\n              onPress={() => setMeridiem('PM')}\n            >\n              <Text\n                style={{\n                  color: componentTheme.toggleButtonTextColor,\n                }}\n              >\n                PM\n              </Text>\n            </ToggleButton>\n\n            <ToggleButton\n              activeButton\n              toggleButtonStyles={[\n                componentStyle.toggleButton ?? {},\n                componentStyle.toggleButtonActive ?? {},\n                {\n                  backgroundColor:\n                    componentTheme.toggleButtonActiveBackgroundColor,\n                  transform: [{ translateX: animation }],\n                },\n              ]}\n            >\n              <Text\n                style={{\n                  color: componentTheme.toggleButtonActiveTextColor,\n                }}\n              >\n                {meridiem}\n              </Text>\n            </ToggleButton>\n          </Toggle>\n        )}\n      </View>\n\n      {showErrorText && !validTime ? (\n        <View style={componentStyle.errorTextContainer}>\n          <Text\n            style={[\n              componentStyle.errorText,\n              {\n                color: componentTheme.errorTextColor,\n                paddingLeft: componentTheme.errorTextPaddingLeft,\n                fontFamily: componentTheme.inputFontFamily,\n              },\n            ]}\n          >\n            {validTime ? '' : componentErrorText}\n          </Text>\n        </View>\n      ) : (\n        <></>\n      )}\n    </View>\n  );\n}\n"]}