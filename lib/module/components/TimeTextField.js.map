{"version":3,"sources":["TimeTextField.tsx"],"names":["React","useEffect","useState","useCallback","TextInput","Tooltip","TimeInputHelper","useDebounce","TimeTextField","givenTime","onTimeValueReady","style","placeholderTime","placeholderColor","focusBorderColor","floatingErrorMessage","isDisabled","maxHours","maxMinutes","onFinishEditing","time","setTime","isFocussed","setIsFocussed","isValid","setIsValid","state","debouncedTime","setDebouncedState","setDebouncedTime","debounce","valid","validate","cancel","focusHandler","lostFocusHandler","color","text","mask","borderColor","undefined","borderWidth","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { TextInput, TextStyle } from 'react-native';\nimport { Tooltip } from 'native-base';\nimport * as TimeInputHelper from '../helpers/timeInput';\nimport type { TimeParts } from 'src/typing/TimeParts';\nimport useDebounce from '../hooks/useDebounce';\n\ntype TimeTextFieldProps = {\n  style: TextStyle[];\n  onTimeValueReady: Function;\n  givenTime: TimeParts | null;\n  placeholderTime?: string;\n  placeholderColor?: string;\n  focusBorderColor?: string;\n  floatingErrorMessage?: string;\n  isDisabled?: boolean;\n  maxHours?: string;\n  maxMinutes?: string;\n  onFinishEditing?: Function;\n};\n\nexport default function TimeTextField({\n  givenTime,\n  onTimeValueReady,\n  style,\n  placeholderTime,\n  placeholderColor,\n  focusBorderColor,\n  floatingErrorMessage,\n  isDisabled,\n  maxHours,\n  maxMinutes,\n  onFinishEditing,\n}: TimeTextFieldProps): JSX.Element {\n  const [time, setTime] = useState<string>('');\n  const [isFocussed, setIsFocussed] = useState(false);\n  const [isValid, setIsValid] = useState(false);\n\n  const {\n    state: debouncedTime,\n    setDebouncedState: setDebouncedTime,\n    debounce,\n  } = useDebounce(time, 250);\n\n  useEffect(() => {\n    if (!givenTime) return;\n    setTime(givenTime.time);\n  }, [givenTime, setTime]);\n\n  useEffect((): void => {\n    const valid = TimeInputHelper.validate(debouncedTime, maxHours, maxMinutes);\n    setIsValid(valid);\n    onTimeValueReady(valid, debouncedTime);\n  }, [debouncedTime, maxHours, maxMinutes, onTimeValueReady]);\n\n  useEffect((): (() => void) => {\n    setDebouncedTime(time);\n\n    return () => {\n      debounce.cancel();\n    };\n  }, [debounce, time, setDebouncedTime]);\n\n  const focusHandler = useCallback(() => {\n    setIsFocussed(true);\n  }, []);\n\n  const lostFocusHandler = useCallback(() => {\n    setIsFocussed(false);\n    if (onFinishEditing) {\n      onFinishEditing(time);\n    }\n  }, [onFinishEditing, time]);\n\n  return (\n    <Tooltip\n      label={floatingErrorMessage ?? ''}\n      isOpen={floatingErrorMessage ? isValid && isFocussed : false}\n      placement=\"bottom\"\n      mt=\"16\" // * hacky value inserted to push it below - should link to size of input\n      py=\"0.5\"\n      px=\"1\"\n      bg=\"#BDBDBD\"\n      _text={{ color: '#78716c' }}\n    >\n      <TextInput\n        keyboardType=\"number-pad\"\n        maxLength={5}\n        onChangeText={(text: string) => setTime(TimeInputHelper.mask(text))}\n        onBlur={lostFocusHandler}\n        onFocus={focusHandler}\n        editable={!isDisabled ?? true}\n        selectTextOnFocus={!isDisabled ?? true}\n        placeholder={placeholderTime ?? '08:00'}\n        placeholderTextColor={placeholderColor}\n        value={time}\n        style={[\n          style,\n          {\n            borderColor: isFocussed ? focusBorderColor : undefined,\n            borderWidth: isDisabled ? 0 : undefined,\n            backgroundColor: isDisabled ? 'transparent' : undefined,\n          },\n        ]}\n      />\n    </Tooltip>\n  );\n}\n"]}