{"version":3,"sources":["index.tsx"],"names":["React","useEffect","useRef","useState","useCallback","NativeBaseProvider","Animated","StyleSheet","Text","View","TimeTextField","_","Toggle","ToggleButton","defaultStyles","defaultTheme","getLocaleTimeString","parseLocaleTimeString","TimeInput","errorText","showErrorText","initialTime","onTimeChange","onFinishEditing","setCurrentTime","hideToggle","isDisabled","maxHours","maxMinutes","placeholderTime","floatingErrorMessage","styles","theme","initialRender","animation","Value","current","componentReady","setComponentReady","componentTheme","setComponentTheme","componentStyle","setComponentStyle","componentErrorText","setComponentErrorText","currentLocaleTime","currentLocaleTimeParsed","initialTimeParsed","getGivenTime","meridiem","setMeridiem","gt","time","setTime","validTime","setValidTime","handleTimeValueReady","isValid","updated","handleMeridiemChange","timing","toValue","delay","duration","useNativeDriver","start","create","merge","assign","stopAnimation","length","componentContainer","container","placeholderTextColor","focusBorderColor","input","backgroundColor","inputBackgroundColor","borderColor","inputBorderColor","inputInvalidBorderColor","borderWidth","inputBorderWidth","color","inputTextColor","fontFamily","inputFontFamily","fontSize","inputFontSize","toggle","toggleBackgroundColor","toggleButton","toggleButtonBackground","toggleButtonTextColor","toggleButtonActive","toggleButtonActiveBackgroundColor","transform","translateX","toggleButtonActiveTextColor","errorTextContainer","errorTextColor","paddingLeft","errorTextPaddingLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { NativeBaseProvider } from 'native-base';\nimport { Animated, StyleSheet, Text, View } from 'react-native';\nimport TimeTextField from './components/TimeTextField';\nimport _ from 'lodash';\nimport Toggle, { ToggleButton } from './components/Toggle';\nimport defaultStyles from './utils/style';\nimport defaultTheme from './utils/theme';\nimport getLocaleTimeString from './helpers/getLocaleTimeString';\nimport parseLocaleTimeString from './helpers/parseLocaleTimeString';\nimport type TimeInputProps from './typing/TimeInputProps';\nimport type TimeInputStyle from './typing/TimeInputStyle';\nimport type TimeInputTheme from './typing/TimeInputTheme';\nimport type { TimeParts } from './typing/TimeParts';\n\nexport default function TimeInput({\n  errorText = null,\n  showErrorText = true,\n  initialTime = null,\n  onTimeChange = () => {},\n  onFinishEditing,\n  setCurrentTime = false,\n  hideToggle = false,\n  isDisabled = false,\n  maxHours,\n  maxMinutes,\n  placeholderTime,\n  floatingErrorMessage,\n  styles = defaultStyles,\n  theme = defaultTheme,\n}: TimeInputProps): JSX.Element | null {\n  const initialRender = useRef(true);\n  const animation = useRef(new Animated.Value(0)).current;\n  const [componentReady, setComponentReady] = useState<boolean>(false);\n  const [componentTheme, setComponentTheme] = useState<TimeInputTheme | null>(\n    null\n  );\n  const [componentStyle, setComponentStyle] = useState<TimeInputStyle | null>(\n    null\n  );\n  const [componentErrorText, setComponentErrorText] = useState<string>(\n    'Please enter a valid time.'\n  );\n  const [currentLocaleTime] = useState<string>(getLocaleTimeString());\n  const [currentLocaleTimeParsed] = useState<TimeParts>(\n    parseLocaleTimeString(currentLocaleTime)\n  );\n  const [initialTimeParsed] = useState<TimeParts | null>((): TimeParts | null =>\n    !initialTime\n      ? null\n      : parseLocaleTimeString(getLocaleTimeString(initialTime))\n  );\n\n  const getGivenTime = (): TimeParts | null => {\n    if (initialTime && initialTimeParsed) return initialTimeParsed;\n    return setCurrentTime ? currentLocaleTimeParsed : null;\n  };\n\n  const [meridiem, setMeridiem] = useState<string>(() => {\n    let gt = getGivenTime();\n    return !gt ? currentLocaleTimeParsed.meridiem : gt.meridiem;\n  });\n  const [time, setTime] = useState<string>('');\n  const [validTime, setValidTime] = useState<boolean>(true);\n\n  const handleTimeValueReady = (isValid: boolean, updated: string): void => {\n    setTime(updated);\n    setValidTime(isValid);\n  };\n\n  const handleMeridiemChange = useCallback(() => {\n    Animated.timing(animation, {\n      toValue: meridiem === 'PM' ? 40 : 0,\n      delay: 0,\n      duration: 225,\n      useNativeDriver: true,\n    }).start();\n  }, [animation, meridiem]);\n\n  // Init component after setting the theme and styles\n  useEffect((): void => {\n    if (!componentStyle || !componentTheme) return;\n    setComponentReady(true);\n  }, [componentStyle, componentTheme, setComponentReady]);\n\n  useEffect((): void => {\n    setComponentStyle(StyleSheet.create(_.merge({}, defaultStyles, styles)));\n    setComponentTheme(_.assign({}, defaultTheme, theme));\n  }, [styles, theme, setComponentStyle, setComponentTheme]);\n\n  useEffect(() => {\n    if (!errorText) return;\n    setComponentErrorText(errorText);\n  }, [errorText, setComponentErrorText]);\n\n  useEffect(() => {\n    handleMeridiemChange();\n    return () => animation.stopAnimation();\n  }, [meridiem, animation, handleMeridiemChange]);\n\n  useEffect(() => {\n    if (initialRender.current) {\n      initialRender.current = false;\n      return;\n    }\n\n    time.length\n      ? onTimeChange(`${time} ${meridiem}`, validTime)\n      : onTimeChange('', validTime);\n  }, [time, meridiem, validTime, onTimeChange]);\n\n  if (!componentReady || !componentStyle || !componentTheme) return null;\n\n  return (\n    <NativeBaseProvider>\n      <View style={componentStyle.componentContainer}>\n        <View style={componentStyle.container}>\n          <TimeTextField\n            givenTime={getGivenTime()}\n            onFinishEditing={onFinishEditing}\n            maxHours={maxHours}\n            maxMinutes={maxMinutes}\n            isDisabled={isDisabled}\n            placeholderTime={placeholderTime}\n            placeholderColor={componentTheme.placeholderTextColor}\n            focusBorderColor={componentTheme.focusBorderColor}\n            floatingErrorMessage={floatingErrorMessage}\n            style={[\n              componentStyle.input ?? {},\n              {\n                backgroundColor: componentTheme.inputBackgroundColor,\n                borderColor: validTime\n                  ? componentTheme.inputBorderColor\n                  : componentTheme.inputInvalidBorderColor,\n                borderWidth: componentTheme.inputBorderWidth,\n                color: componentTheme.inputTextColor,\n                fontFamily: componentTheme.inputFontFamily,\n                fontSize: componentTheme.inputFontSize,\n              },\n            ]}\n            onTimeValueReady={handleTimeValueReady}\n          />\n\n          {!hideToggle && (\n            <Toggle\n              toggleStyles={[\n                componentStyle.toggle ?? {},\n                {\n                  backgroundColor: componentTheme.toggleBackgroundColor,\n                },\n              ]}\n            >\n              <ToggleButton\n                toggleButtonStyles={[\n                  componentStyle.toggleButton ?? {},\n                  {\n                    backgroundColor: componentTheme.toggleButtonBackground,\n                  },\n                ]}\n                onPress={() => setMeridiem('AM')}\n              >\n                <Text\n                  style={{\n                    color: componentTheme.toggleButtonTextColor,\n                  }}\n                >\n                  AM\n                </Text>\n              </ToggleButton>\n\n              <ToggleButton\n                toggleButtonStyles={[\n                  componentStyle.toggleButton ?? {},\n                  {\n                    backgroundColor: componentTheme.toggleButtonBackground,\n                  },\n                ]}\n                onPress={() => setMeridiem('PM')}\n              >\n                <Text\n                  style={{\n                    color: componentTheme.toggleButtonTextColor,\n                  }}\n                >\n                  PM\n                </Text>\n              </ToggleButton>\n\n              <ToggleButton\n                activeButton\n                toggleButtonStyles={[\n                  componentStyle.toggleButton ?? {},\n                  componentStyle.toggleButtonActive ?? {},\n                  {\n                    backgroundColor:\n                      componentTheme.toggleButtonActiveBackgroundColor,\n                    transform: [{ translateX: animation }],\n                  },\n                ]}\n              >\n                <Text\n                  style={{\n                    color: componentTheme.toggleButtonActiveTextColor,\n                  }}\n                >\n                  {meridiem}\n                </Text>\n              </ToggleButton>\n            </Toggle>\n          )}\n        </View>\n\n        {showErrorText && !validTime ? (\n          <View style={componentStyle.errorTextContainer}>\n            <Text\n              style={[\n                componentStyle.errorText,\n                {\n                  color: componentTheme.errorTextColor,\n                  paddingLeft: componentTheme.errorTextPaddingLeft,\n                  fontFamily: componentTheme.inputFontFamily,\n                },\n              ]}\n            >\n              {validTime ? '' : componentErrorText}\n            </Text>\n          </View>\n        ) : (\n          <></>\n        )}\n      </View>\n    </NativeBaseProvider>\n  );\n}\n"]}